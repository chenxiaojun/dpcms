%div.order-detail
  %div.header
    %div
      %span 订单信息
      %span{ id: 'count_down', data:{ status: resource.status, timestamp: resource.created_at.to_i } }
        = "订单状态： #{I18n.t('order.' + resource.status)}"
        %span.multi-status
          - if resource.status.eql?('paid')
            %span= link_to '确认发货', delivered_order_shop_product_order_path(resource),
            data: { confirm: "确认发货吗?" }, method: :post, remote: true
          - unless resource.status.eql?('canceled')
            %span.cancel= link_to '取消', cancel_order_shop_product_order_path(resource), remote: true
  %div.body
    %div.content
      %div
        %span= "订单编号：#{resource.order_number}"
        %span= "下单时间：#{resource.created_at}"
      %div
        %table
          %tr
            %td 序号
            %td 商品名称
            %td 商品图片
            %td 类别
            %td 价格
            %td 实付价格
            %td 数量
          - resource.product_order_items.each_with_index do |item, index|
          %tr
          - variant = item&.variant
            %td= index + 1
            %td= variant&.product&.title
            %td
              - if variant.image.present?
                = link_to image_tag(variant.image.preview), variant.image.preview, target: '_blank'
              - else
                %span
            %td= variant&.product&.category&.name
            %td= item.original_price
            %td= item.price
            %td= item.number
        %span= "总价：¥#{resource.total_price} (含快递：¥#{resource.shipping_price})"
    - user = resource.user
    %div.user_info
      %div
        %div 用户账户信息
        %div
          %span= "用户id：#{user.user_uuid}"
          %span= "用户手机：#{user.mobile}"
          %span= "用户邮箱：#{user.email}"
      - address = resource.product_shipping_address
      %div
        %div 收货地址信息
        %div
          %span= "收货人：#{address&.name}"
          %span= "联系方式：#{address&.mobile}"
          %span= "收货地址：#{address&.full_address}"

:javascript
  window.onload = showCountDown(1800);



