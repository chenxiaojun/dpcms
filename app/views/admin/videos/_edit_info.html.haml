- @video.video_en || @video.build_video_en
- types = VideoType.all.collect do |type|
  - type_name = type.published ? type.name + ' [已发布]' : type.name
  - [type_name, type.id]

- selected = types.collect do |val, key|
  - break [val, key] if params[:id].present? && key.eql?(Video.find(params[:id]).video_type.try(:id).to_i)
  - break [val, key] if params[:type_id].present? && key.eql?(params[:type_id].to_i)

= semantic_form_for [:admin, @video] do |f|
  = f.inputs name: '视频管理' do
    %li
      %div
        %label 视频名称
        %span 中文：
        = f.text_field :name
        %span{class: 'common_input_style_en'} 英文：
        = f.semantic_fields_for :video_en do |en|
          = en.text_field :name
    %li
      %div
        %label 标题描述
        %span 中文：
        = f.text_field :title_desc
        %span{class: 'common_input_style_en'} 英文：
        = f.semantic_fields_for :video_en do |en|
          = en.text_field :title_desc
    = f.input :video_type_id, as: :select, collection: options_for_select(types, selected)
    = f.input :cover_link, as: :file, hint: f.object.image_thumb.present? ? image_tag(f.object.image_thumb, height: 60) : nil
    = f.input :video_link
    = f.input :video_duration
    = f.input :published
    = multilingual_editor_switch
    %li#markdown_cn
      ~ f.text_area :description
    %li#markdown_en
      = f.semantic_fields_for :video_en do |en|
        ~ en.text_area :description
    = f.actions

:javascript
  $(function() {
        dpEditor.call($('#video_description'), $('form.video'));
        dpEditor.call($('#video_video_en_attributes_description'), $('form.video'));
  });
