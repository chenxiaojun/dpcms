- @info.info_en || @info.build_info_en
- types = InfoType.all.collect do |type|
  - type_name = type.published ? type.name + ' [已发布]' : type.name
  - [type_name, type.id]

- selected = types.collect do |val, key|
  - break [val, key] if params[:id].present? && key.eql?(Info.find(params[:id]).info_type.try(:id).to_i)
  - break [val, key] if params[:type_id].present? && key.eql?(params[:type_id].to_i)

= semantic_form_for [:admin, @info] do |f|
  = f.inputs name: '资讯管理' do
    = f.input :image, as: :file, hint: f.object.image_thumb.present? ? image_tag(f.object.image_thumb) : nil
    %li
      %div
        %label 资讯名称
        %span 中文：
        = f.text_field :title
        %span{class: 'common_input_style_en'} 英文：
        = f.semantic_fields_for :info_en do |en|
          = en.text_field :title
    = f.input :date
    = f.input :source_type, as: :select, collection: SOURCE_TYPE
    %li
      %div
        %label 来源内容
        %span 中文：
        = f.text_field :source
        %span{class: 'common_input_style_en'} 英文：
        = f.semantic_fields_for :info_en do |en|
          = en.text_field :source
    = f.input :info_type_id, as: :select, collection: options_for_select(types, selected)
    = f.input :published
    %li{class: 'common_radio_lang'}
      %div
        = radio_button_tag(:common_lang, 'yes')
        %span 中文
        %span{class: 'common_input_style_en'}
          = radio_button_tag(:common_lang, 'no')
        %span 英文
    %li#common_markdown_style_cn
      ~ f.text_area :description
    %li#common_markdown_style_en
      = f.semantic_fields_for :info_en do |en|
        ~ en.text_area :description
    = f.actions

:javascript
  $(function() {
        dpEditor.call($('#info_description'), $('form.info'));
  });
  $(function() {
        dpEditor.call($('#info_info_en_attributes_description'), $('form.info'));
  });
